(self.webpackChunk=self.webpackChunk||[]).push([[318],{871:function(t,e,n){"use strict";n(716);var o=n(893),a=(n(554),n(481)),r=n.n(a),i=n(323),s=n(287),l=n(715),c=n(544),u=n(551),d={name:"groupMap",props:["type"],components:{LControlAttribution:i.A,LIconDefault:s.A,LMap:l.A,LTileLayer:c.A,LMarker:u.A},data:function(){return{showing:"neighbourhood_networks",filterTab:"name",latLng:null,postcode:null,view:"map",groups:[],search:null,selected:null,imagePath:null,zoom:12,center:(0,a.latLng)(53.7993475,-1.5032696),blueIcon:r().icon({iconUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon.png"),iconRetinaUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-2x.png"),iconSize:[25,41],iconAnchor:[13,41]}),orangeIcon:r().icon({iconUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-orange.png"),iconRetinaUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-orange-2x.png"),iconSize:[25,41],iconAnchor:[13,41]}),url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}},watch:{latLng:function(){this.latLng&&this.latLng.length?this.$refs.myMap.mapObject.flyTo((0,a.latLng)(this.latLng[0],this.latLng[1]),14):this.$refs.myMap.mapObject.flyTo(this.center,this.zoom)}},computed:{filteredList:function(){var t=this;if(!this.groups)return null;var e=this.groups.filter((function(t){return t.address})),n=this.getGroupsFilteredByType(e);return"name"==this.filterTab&&this.search?n.filter((function(e){return e.title.rendered.toLowerCase().includes(t.search.toLowerCase())||e.address.address.toLowerCase().includes(t.search.toLowerCase())})):"postcode"==this.filterTab&&this.postcode?n.map((function(e){return e.latitude&&e.longitude?e.distance=t.distanceFromUserLatLng(e):e.distance,e})).sort((function(t,e){return t.distance-e.distance})):n}},mounted:function(){var t=this;this.imagePath="".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/");fetch("/wp-json/wp/v2/".concat(this.type,"?orderby=title&per_page=100&order=asc")).then((function(t){return t.json()})).then((function(e){return t.groups=e}))},methods:{getGroupsFilteredByType:function(t){var e=this;return t||this.groups?t.filter((function(t){return"neighbourhood_networks"!=e.showing||t.neighbourhood_network})):null},scrollTo:function(t){this.selected=t,this.$refs["".concat(t,"-sidebar")][0].scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},convertPostcodeToLatLng:function(){var t=this;fetch("//api.postcodes.io/postcodes/".concat(this.postcode.split(" ").join(""))).then((function(t){return t.json()})).then((function(e){200==e.status?(t.latLng=[e.result.latitude,e.result.longitude],t.error=null,t.postcode=t.postcode.toUpperCase()):t.error=e.error}))},distanceFromUserLatLng:function(t){var e=this.distance(t.address.lat,t.address.lng,this.latLng[0],this.latLng[1]);return Math.round(10*e)/10},distance:function(t,e,n,o){if(t==n&&e==o)return 0;var a=Math.PI*t/180,r=Math.PI*n/180,i=e-o,s=Math.PI*i/180,l=Math.sin(a)*Math.sin(r)+Math.cos(a)*Math.cos(r)*Math.cos(s);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515},clearPostcode:function(){this.latLng=[],this.postcode=null}}},p=n(72),g=n.n(p),h=n(536),f={insert:"head",singleton:!1},m=(g()(h.A,f),h.A.locals,n(486)),b=(0,m.A)(d,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container max-w-5xl my-4"},[e("button",{staticClass:"px-4 mr-2 text-xl leading-loose rounded-full",class:"map"==t.view?"bg-blue text-white":"bg-sky-light",on:{click:function(e){t.view="map"}}},[t._v("\n      Map view\n    ")]),t._v(" "),e("button",{staticClass:"px-4 text-xl leading-loose rounded-full",class:"list"==t.view?"bg-blue text-white":"bg-sky-light hover:bg-sky",on:{click:function(e){t.view="list"}}},[t._v("\n      List view\n    ")])]),t._v(" "),"map"==t.view?e("div",{staticClass:"relative flex flex-col overflow-hidden border-t lg:flex-row"},[e("div",{staticClass:"relative flex-1 map-container"},[e("l-map",{ref:"myMap",attrs:{zoom:t.zoom,center:t.center,options:{attributionControl:!1}}},[e("l-control-attribution",{attrs:{position:"bottomleft"}}),t._v(" "),e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._v(" "),t._l(t.filteredList,(function(n){return e("l-marker",{key:n.slug,ref:"".concat(n.slug,"-marker"),refInFor:!0,attrs:{icon:n.neighbourhood_network?t.orangeIcon:t.blueIcon,"lat-lng":[n.address.lat,n.address.lng]},on:{click:function(e){return t.scrollTo(n.slug)}}})}))],2)],1),t._v(" "),e("div",{staticClass:"top-0 bottom-0 right-0 overflow-y-auto shadow-2xl lg:absolute lg:w-1/3 lg:max-w-sm bg-sky-lightest map-sidebar bg-opacity-90"},[e("div",{staticClass:"bg-blue-lightest"},[e("div",{staticClass:"flex items-center gap-2 px-3 py-3"},[e("label",{attrs:{for:"type-selector"}},[t._v("Show:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.showing,expression:"showing"}],staticClass:"flex-grow",attrs:{id:"type-selector"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.showing=e.target.multiple?n:n[0]}}},[e("option",{attrs:{value:"neighbourhood_networks"}},[t._v("Neighbourhood Networks")]),t._v(" "),e("option",{attrs:{value:"all"}},[t._v("All groups")])])]),t._v(" "),e("div",{staticClass:"flex flex-row bg-blue-lightest"},[e("button",{staticClass:"px-4 py-3",class:{"bg-blue-light text-white":"name"==t.filterTab},on:{click:function(e){t.filterTab="name"}}},[t._v("\n            Filter by name\n          ")]),t._v(" "),e("button",{staticClass:"px-4 py-3",class:{"bg-blue-light text-white":"postcode"==t.filterTab},on:{click:function(e){t.filterTab="postcode"}}},[t._v("\n            Search by postcode\n          ")])]),t._v(" "),"name"==t.filterTab?e("div",{staticClass:"flex flex-row items-center gap-2 px-3 py-3 bg-blue-light"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full px-3 py-2 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{type:"text","aria-label":"Filter results by name",placeholder:"Search by name.."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),e("button",{staticClass:"text-white",on:{click:function(e){t.search=null}}},[t._v("Clear")])]):t._e(),t._v(" "),"postcode"==t.filterTab?e("div",{staticClass:"flex flex-row items-center gap-2 px-3 py-3 bg-blue-light"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.postcode,expression:"postcode"}],staticClass:"w-full px-3 py-2 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{type:"text","aria-label":"Filter results by name",placeholder:"Enter postcode and press enter"},domProps:{value:t.postcode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.convertPostcodeToLatLng.apply(null,arguments)},input:function(e){e.target.composing||(t.postcode=e.target.value)}}}),t._v(" "),t.latLng?t._e():e("button",{staticClass:"text-white",on:{click:t.convertPostcodeToLatLng}},[t._v("\n            Search\n          ")]),t._v(" "),t.latLng?e("button",{staticClass:"text-white",on:{click:function(e){t.latLng=t.postcode=null}}},[t._v("\n            Clear\n          ")]):t._e()]):t._e()]),t._v(" "),t._l(t.filteredList,(function(n){return e("a",{key:n.slug,ref:"".concat(n.slug,"-sidebar"),refInFor:!0,staticClass:"block px-4 py-6 border-b border-blue-lightest hover:bg-sky-light",class:{"bg-sky-light ml-0 border-l-8 border-blue":t.selected==n.slug},attrs:{href:n.link}},[n.neighbourhood_network?e("p",{staticClass:"inline-block -ml-1 px-2 pt-0.5 mb-1 text-sm font-normal rounded-md bg-orange-light"},[t._v("\n          Neighbourhood Network\n        ")]):t._e(),t._v(" "),e("h3",{staticClass:"text-lg font-bold leading-tight",domProps:{innerHTML:t._s(n.title.rendered)}}),t._v(" "),n.area_covered?e("div",{staticClass:"text-sm",domProps:{innerHTML:t._s(n.area_covered)}}):t._e()])})),t._v(" "),t.filteredList.length?t._e():e("div",{staticClass:"p-4 rounded"},[t._v("\n        No groups to show you.\n      ")])],2)]):e("div",{staticClass:"container max-w-5xl my-12"},[e("div",{staticClass:"flex flex-col gap-8 px-8 py-4 mb-6 lg:flex-row bg-blue-lightest"},[e("div",{staticClass:"flex items-center flex-grow max-w-lg gap-4"},[e("label",{attrs:{for:"type-selector"}},[t._v("Show:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.showing,expression:"showing"}],staticClass:"flex-grow",attrs:{id:"type-selector"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.showing=e.target.multiple?n:n[0]}}},[e("option",{attrs:{value:"neighbourhood_networks"}},[t._v("Neighbourhood Networks")]),t._v(" "),e("option",{attrs:{value:"all"}},[t._v("All groups")])])]),t._v(" "),e("div",{staticClass:"flex flex-row items-center flex-grow gap-2"},[e("label",{attrs:{for:"list-search"}},[t._v("Search:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full max-w-lg px-3 py-3 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{id:"list-search",type:"text",placeholder:"Search by name.."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),t._l(t.getGroupsFilteredByType(t.groups),(function(n){return e("a",{key:n.slug,ref:"".concat(n.slug,"-sidebar"),refInFor:!0,staticClass:"block py-8",attrs:{href:n.link}},[e("h3",{staticClass:"text-xl font-bold"},[e("span",{domProps:{innerHTML:t._s(n.title.rendered)}}),t._v(" "),n.neighbourhood_network?e("p",{staticClass:"inline-block px-2 pt-0.5 ml-3 text-base font-normal rounded-lg bg-blue-lightest"},[t._v("\n          Neighbourhood network\n        ")]):t._e()]),t._v(" "),n.area_covered?e("div",{staticClass:"text",domProps:{innerHTML:t._s(n.area_covered)}}):t._e()])}))],2)])}),[],!1,null,"5d1b4b1a",null),v=b.exports,y={name:"groupMap",props:["type"],components:{LControlAttribution:i.A,LIconDefault:s.A,LMap:l.A,LTileLayer:c.A,LMarker:u.A},data:function(){return{showing:"neighbourhood_networks",filterTab:"name",latLng:null,postcode:null,view:"map",groups:[],search:null,selected:null,imagePath:null,zoom:12,center:(0,a.latLng)(53.7993475,-1.5032696),blueIcon:r().icon({iconUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon.png"),iconRetinaUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-2x.png"),iconSize:[25,41],iconAnchor:[13,41]}),orangeIcon:r().icon({iconUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-orange.png"),iconRetinaUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-orange-2x.png"),iconSize:[25,41],iconAnchor:[13,41]}),url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}},watch:{latLng:function(){this.latLng&&this.latLng.length?this.$refs.myMap.mapObject.flyTo((0,a.latLng)(this.latLng[0],this.latLng[1]),14):this.$refs.myMap.mapObject.flyTo(this.center,this.zoom)}},computed:{filteredList:function(){var t=this;if(!this.groups)return null;var e=this.groups.filter((function(t){return t.address}));return"name"==this.filterTab&&this.search?e.filter((function(e){return e.title.rendered.toLowerCase().includes(t.search.toLowerCase())||e.address.address.toLowerCase().includes(t.search.toLowerCase())})):"postcode"==this.filterTab&&this.postcode?e.map((function(e){return e.latitude&&e.longitude?e.distance=t.distanceFromUserLatLng(e):e.distance,e})).sort((function(t,e){return t.distance-e.distance})):e}},mounted:function(){var t=this;this.imagePath="".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/");fetch("/wp-json/wp/v2/business?orderby=title&per_page=100&order=asc".concat(this.type?"&type="+this.type:null)).then((function(t){return t.json()})).then((function(e){return t.groups=e}))},methods:{scrollTo:function(t){this.selected=t,this.$refs["".concat(t,"-sidebar")][0].scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},convertPostcodeToLatLng:function(){var t=this;fetch("//api.postcodes.io/postcodes/".concat(this.postcode.split(" ").join(""))).then((function(t){return t.json()})).then((function(e){200==e.status?(t.latLng=[e.result.latitude,e.result.longitude],t.error=null,t.postcode=t.postcode.toUpperCase()):t.error=e.error}))},distanceFromUserLatLng:function(t){var e=this.distance(t.address.lat,t.address.lng,this.latLng[0],this.latLng[1]);return Math.round(10*e)/10},distance:function(t,e,n,o){if(t==n&&e==o)return 0;var a=Math.PI*t/180,r=Math.PI*n/180,i=e-o,s=Math.PI*i/180,l=Math.sin(a)*Math.sin(r)+Math.cos(a)*Math.cos(r)*Math.cos(s);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515},clearPostcode:function(){this.latLng=[],this.postcode=null}}},w=n(695),_={insert:"head",singleton:!1},x=(g()(w.A,_),w.A.locals,(0,m.A)(y,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container max-w-5xl my-4"},[e("button",{staticClass:"px-4 mr-2 text-xl leading-loose rounded-full",class:"map"==t.view?"bg-blue text-white":"bg-sky-light",on:{click:function(e){t.view="map"}}},[t._v("\n      Map view\n    ")]),t._v(" "),e("button",{staticClass:"px-4 text-xl leading-loose rounded-full",class:"list"==t.view?"bg-blue text-white":"bg-sky-light hover:bg-sky",on:{click:function(e){t.view="list"}}},[t._v("\n      List view\n    ")])]),t._v(" "),"map"==t.view?e("div",{staticClass:"relative flex flex-col overflow-hidden border-t lg:flex-row"},[e("div",{staticClass:"relative flex-1 map-container"},[e("l-map",{ref:"myMap",attrs:{zoom:t.zoom,center:t.center,options:{attributionControl:!1}}},[e("l-control-attribution",{attrs:{position:"bottomleft"}}),t._v(" "),e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._v(" "),t._l(t.filteredList,(function(n){return e("l-marker",{key:n.slug,ref:"".concat(n.slug,"-marker"),refInFor:!0,attrs:{icon:n.neighbourhood_network?t.orangeIcon:t.blueIcon,"lat-lng":[n.address.lat,n.address.lng]},on:{click:function(e){return t.scrollTo(n.slug)}}})}))],2)],1),t._v(" "),e("div",{staticClass:"top-0 bottom-0 right-0 overflow-y-auto shadow-2xl lg:absolute lg:w-1/3 lg:max-w-sm bg-sky-lightest map-sidebar bg-opacity-90"},[e("div",{staticClass:"bg-blue-lightest"},[e("div",{staticClass:"flex flex-row bg-blue-lightest"},[e("button",{staticClass:"px-4 py-3",class:{"bg-blue-light text-white":"name"==t.filterTab},on:{click:function(e){t.filterTab="name"}}},[t._v("\n            Filter by name\n          ")]),t._v(" "),e("button",{staticClass:"px-4 py-3",class:{"bg-blue-light text-white":"postcode"==t.filterTab},on:{click:function(e){t.filterTab="postcode"}}},[t._v("\n            Search by postcode\n          ")])]),t._v(" "),"name"==t.filterTab?e("div",{staticClass:"flex flex-row items-center gap-2 px-3 py-3 bg-blue-light"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full px-3 py-2 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{type:"text","aria-label":"Filter results by name",placeholder:"Search by name.."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),e("button",{staticClass:"text-white",on:{click:function(e){t.search=null}}},[t._v("Clear")])]):t._e(),t._v(" "),"postcode"==t.filterTab?e("div",{staticClass:"flex flex-row items-center gap-2 px-3 py-3 bg-blue-light"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.postcode,expression:"postcode"}],staticClass:"w-full px-3 py-2 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{type:"text","aria-label":"Filter results by name",placeholder:"Enter postcode and press enter"},domProps:{value:t.postcode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.convertPostcodeToLatLng.apply(null,arguments)},input:function(e){e.target.composing||(t.postcode=e.target.value)}}}),t._v(" "),t.latLng?t._e():e("button",{staticClass:"text-white",on:{click:t.convertPostcodeToLatLng}},[t._v("\n            Search\n          ")]),t._v(" "),t.latLng?e("button",{staticClass:"text-white",on:{click:function(e){t.latLng=t.postcode=null}}},[t._v("\n            Clear\n          ")]):t._e()]):t._e()]),t._v(" "),t._l(t.filteredList,(function(n){return e("a",{key:n.slug,ref:"".concat(n.slug,"-sidebar"),refInFor:!0,staticClass:"block px-4 py-6 border-b border-blue-lightest hover:bg-sky-light",class:{"bg-sky-light ml-0 border-l-8 border-blue":t.selected==n.slug},attrs:{target:"_blank",href:n.url}},[e("h3",{staticClass:"text-lg font-bold leading-tight",domProps:{innerHTML:t._s(n.title.rendered)}}),t._v(" "),e("p",{staticClass:"text-sm truncate"},[n.area_covered?e("span",{staticClass:"inline-block px-3 mr-1 rounded-full bg-sky text-blue"},[t._v(t._s(n.area_covered))]):t._e(),t._v("\n          "+t._s(n.address.address)+"\n        ")])])})),t._v(" "),t.filteredList.length?t._e():e("div",{staticClass:"p-4 rounded"},[t._v("\n        No businesses to show you.\n      ")])],2)]):e("div",{staticClass:"container max-w-5xl my-12"},[e("div",{staticClass:"flex flex-col gap-8 px-8 py-4 mb-6 lg:flex-row bg-blue-lightest"},[e("div",{staticClass:"flex flex-row items-center flex-grow gap-2"},[e("label",{attrs:{for:"list-search"}},[t._v("Search:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full max-w-lg px-3 py-3 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{id:"list-search",type:"text",placeholder:"Search by name.."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),t._l(t.filteredList,(function(n){return e("a",{key:n.slug,ref:"".concat(n.slug,"-sidebar"),refInFor:!0,staticClass:"block py-8",attrs:{target:"_blank",href:n.url}},[e("h3",{staticClass:"text-xl font-bold"},[e("span",{domProps:{innerHTML:t._s(n.title.rendered)}})]),t._v(" "),e("p",{staticClass:"text-sm truncate"},[n.area_covered?e("span",{staticClass:"inline-block px-3 mr-1 rounded-full bg-sky text-blue"},[t._v(t._s(n.area_covered))]):t._e(),t._v("\n        "+t._s(n.address.address)+"\n      ")])])}))],2)])}),[],!1,null,"142ffc3a",null)),C=x.exports,A={name:"groupMap",props:["category"],components:{LControlAttribution:i.A,LIconDefault:s.A,LMap:l.A,LTileLayer:c.A,LMarker:u.A},data:function(){return{showing:"neighbourhood_networks",filterTab:"name",latLng:null,postcode:null,view:"map",groups:[],search:null,selected:null,imagePath:null,zoom:12,center:(0,a.latLng)(53.7993475,-1.5032696),blueIcon:r().icon({iconUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon.png"),iconRetinaUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-2x.png"),iconSize:[25,41],iconAnchor:[13,41]}),orangeIcon:r().icon({iconUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-orange.png"),iconRetinaUrl:"".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/marker-icon-orange-2x.png"),iconSize:[25,41],iconAnchor:[13,41]}),url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}},watch:{latLng:function(){this.latLng&&this.latLng.length?this.$refs.myMap.mapObject.flyTo((0,a.latLng)(this.latLng[0],this.latLng[1]),14):this.$refs.myMap.mapObject.flyTo(this.center,this.zoom)}},computed:{filteredList:function(){var t=this;if(!this.groups)return null;var e=this.groups.filter((function(t){return t.latitude&&t.longitude}));return"name"==this.filterTab&&this.search?e.filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())})):"postcode"==this.filterTab&&this.postcode&&this.latLng?e.map((function(e){return e.latitude&&e.longitude?e.distance=t.distanceFromUserLatLng(e):e.distance,e})).sort((function(t,e){return t.distance-e.distance})):e}},mounted:function(){var t=this;this.imagePath="".concat(window.directory_uri.stylesheet_directory_uri,"/public/images/leaflet/");fetch("https://localleeds.org.uk/api/services/category/".concat(this.category,"/true")).then((function(t){return t.json()})).then((function(e){return t.groups=e}))},methods:{scrollTo:function(t){this.selected=t,this.$refs["".concat(t,"-sidebar")][0].scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},convertPostcodeToLatLng:function(){var t=this;fetch("//api.postcodes.io/postcodes/".concat(this.postcode.split(" ").join(""))).then((function(t){return t.json()})).then((function(e){200==e.status?(t.latLng=[e.result.latitude,e.result.longitude],t.error=null,t.postcode=t.postcode.toUpperCase()):t.error=e.error}))},distanceFromUserLatLng:function(t){console.log(this.latLng);var e=this.distance(t.latitude,t.longitude,this.latLng[0],this.latLng[1]);return Math.round(10*e)/10},distance:function(t,e,n,o){if(t==n&&e==o)return 0;var a=Math.PI*t/180,r=Math.PI*n/180,i=e-o,s=Math.PI*i/180,l=Math.sin(a)*Math.sin(r)+Math.cos(a)*Math.cos(r)*Math.cos(s);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515},clearPostcode:function(){this.latLng=[],this.postcode=null}}},k=n(324),L={insert:"head",singleton:!1},M=(g()(k.A,L),k.A.locals,(0,m.A)(A,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container max-w-5xl my-4"},[e("button",{staticClass:"px-4 mr-2 text-xl leading-loose rounded-full",class:"map"==t.view?"bg-blue text-white":"bg-sky-light",on:{click:function(e){t.view="map"}}},[t._v("\n      Map view\n    ")]),t._v(" "),e("button",{staticClass:"px-4 text-xl leading-loose rounded-full",class:"list"==t.view?"bg-blue text-white":"bg-sky-light hover:bg-sky",on:{click:function(e){t.view="list"}}},[t._v("\n      List view\n    ")])]),t._v(" "),"map"==t.view?e("div",{staticClass:"relative flex flex-col overflow-hidden border-t lg:flex-row"},[e("div",{staticClass:"relative flex-1 map-container"},[e("l-map",{ref:"myMap",attrs:{zoom:t.zoom,center:t.center,options:{attributionControl:!1}}},[e("l-control-attribution",{attrs:{position:"bottomleft"}}),t._v(" "),e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._v(" "),t._l(t.filteredList,(function(n){return e("l-marker",{key:n.id,ref:"".concat(n.id,"-marker"),refInFor:!0,attrs:{icon:n.neighbourhood_network?t.orangeIcon:t.blueIcon,"lat-lng":[n.latitude,n.longitude]},on:{click:function(e){return t.scrollTo(n.id)}}})}))],2)],1),t._v(" "),e("div",{staticClass:"top-0 bottom-0 right-0 overflow-y-auto shadow-2xl lg:absolute lg:w-1/3 lg:max-w-sm bg-sky-lightest map-sidebar bg-opacity-90"},[e("div",{staticClass:"bg-blue-lightest"},[e("div",{staticClass:"flex flex-row bg-blue-lightest"},[e("button",{staticClass:"px-4 py-3",class:{"bg-blue-light text-white":"name"==t.filterTab},on:{click:function(e){t.filterTab="name"}}},[t._v("\n            Filter by name\n          ")]),t._v(" "),e("button",{staticClass:"px-4 py-3",class:{"bg-blue-light text-white":"postcode"==t.filterTab},on:{click:function(e){t.filterTab="postcode"}}},[t._v("\n            Search by postcode\n          ")])]),t._v(" "),"name"==t.filterTab?e("div",{staticClass:"flex flex-row items-center gap-2 px-3 py-3 bg-blue-light"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full px-3 py-2 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{type:"text","aria-label":"Filter results by name",placeholder:"Search by name.."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),e("button",{staticClass:"text-white",on:{click:function(e){t.search=null}}},[t._v("Clear")])]):t._e(),t._v(" "),"postcode"==t.filterTab?e("div",{staticClass:"flex flex-row items-center gap-2 px-3 py-3 bg-blue-light"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.postcode,expression:"postcode"}],staticClass:"w-full px-3 py-2 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{type:"text","aria-label":"Filter results by name",placeholder:"Enter postcode and press enter"},domProps:{value:t.postcode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.convertPostcodeToLatLng.apply(null,arguments)},input:function(e){e.target.composing||(t.postcode=e.target.value)}}}),t._v(" "),t.latLng?t._e():e("button",{staticClass:"text-white",on:{click:t.convertPostcodeToLatLng}},[t._v("\n            Search\n          ")]),t._v(" "),t.latLng?e("button",{staticClass:"text-white",on:{click:function(e){t.latLng=t.postcode=null}}},[t._v("\n            Clear\n          ")]):t._e()]):t._e()]),t._v(" "),t._l(t.filteredList,(function(n){return e("a",{key:n.id,ref:"".concat(n.id,"-sidebar"),refInFor:!0,staticClass:"block px-4 py-6 border-b border-blue-lightest hover:bg-sky-light",class:{"bg-sky-light ml-0 border-l-8 border-blue":t.selected==n.id},attrs:{target:"_blank",href:n.url}},[e("h3",{staticClass:"text-lg font-bold leading-tight",domProps:{innerHTML:t._s(n.name)}}),t._v(" "),e("p",{staticClass:"text-sm truncate"},[t._v("\n          "+t._s(n.organisation)+"\n        ")]),t._v(" "),n.distance?e("p",{staticClass:"rounded-full bg-blue-lightest py-1 px-3 inline-block mt-2 text-xs"},[t._v("\n          "+t._s(n.distance)+" miles away\n        ")]):t._e()])})),t._v(" "),t.filteredList.length?t._e():e("div",{staticClass:"p-4 rounded"},[t._v("\n        No businesses to show you.\n      ")])],2)]):e("div",{staticClass:"container max-w-5xl my-12"},[e("div",{staticClass:"flex flex-col gap-8 px-8 py-4 mb-6 lg:flex-row bg-blue-lightest"},[e("div",{staticClass:"flex flex-row items-center flex-grow gap-2"},[e("label",{attrs:{for:"list-search"}},[t._v("Search:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"w-full max-w-lg px-3 py-3 leading-tight text-gray-700 border rounded-full shadow appearance-none focus:outline-none focus:shadow-outline",attrs:{id:"list-search",type:"text",placeholder:"Search by name.."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),t._l(t.filteredList,(function(n){return e("a",{key:n.id,ref:"".concat(n.id,"-sidebar"),refInFor:!0,staticClass:"block py-8",attrs:{target:"_blank",href:n.url}},[e("h3",{staticClass:"text-xl font-bold"},[e("span",{domProps:{innerHTML:t._s(n.name)}})]),t._v(" "),e("p",{staticClass:"text-sm truncate"},[t._v("\n        "+t._s(n.organisation)+"\n      ")])])}))],2)])}),[],!1,null,"bc9ca632",null)),T=M.exports;o.Ay.component("group-map",v),o.Ay.component("business-map",C),o.Ay.component("localleeds-map",T);new o.Ay({el:"#app"});document.getElementById("main-menu-button").addEventListener("click",(function(t){t.currentTarget.innerText="Menu"==t.currentTarget.innerText?"Close menu":"Menu",document.body.scrollTop=0,document.body.classList.toggle("overflow-hidden"),document.getElementById("main-menu").classList.toggle("-translate-x-full"),document.getElementById("main-menu-container").scrollTop=0})),document.querySelectorAll(".wp-block-person").forEach((function(t){console.log(t);var e=t.querySelector(".wp-block-columns"),n=t.querySelector(".person-details");e.setAttribute("aria-expanded",!1),n.hidden=!0,e.addEventListener("click",(function(){var t="true"===e.getAttribute("aria-expanded")||!1;e.setAttribute("aria-expanded",!t),t?n.setAttribute("hidden",!0):n.removeAttribute("hidden")}))}))},716:function(){function t(t,n){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,n);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return s=t.done,t},e:function(t){l=!0,i=t},f:function(){try{s||null==o.return||o.return()}finally{if(l)throw i}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.createElement("b").style,o=(arguments.length>2&&void 0!==arguments[2]||(n.gap=0),arguments.length>3&&void 0!==arguments[3]?arguments[3]:new WeakMap),a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:/^(normal|0px)+$/,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(t){if(!o.has(t)&&(o.set(t,!0),!t.shadowRoot)){var n=getComputedStyle(t);if(/^(inline-)?flex$/.test(n.display)&&!a.test(n.rowGap+n.columnGap)){var r=t.attachShadow({mode:"open"}),i=r.appendChild(e.createElement("style")),s=(r.appendChild(e.createElement("slot")),function(){i.textContent="::slotted(*){margin:calc(".concat(n.rowGap,"/2) calc(").concat(n.columnGap,"/2)}slot{display:inherit;flex-direction:inherit;flex-wrap:inherit;margin:calc(").concat(n.rowGap,"/-2) calc(").concat(n.columnGap,"/-2);}"),requestAnimationFrame(requestAnimationFrame.bind(null,s))});s()}}},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){Array.from(e.all,r),new MutationObserver((function(e){var n,o=t(e);try{for(o.s();!(n=o.n()).done;){var a,i=t(n.value.addedNodes);try{for(i.s();!(a=i.n()).done;){var s=a.value;1===s.nodeType&&r(s)}}catch(t){i.e(t)}finally{i.f()}}}catch(t){o.e(t)}finally{o.f()}})).observe(e,{childList:!0,subtree:!0})};n.gap||i()}(document)},695:function(t,e,n){"use strict";var o=n(627),a=n.n(o),r=n(798),i=n.n(r)()(a());i.push([t.id,".map-container[data-v-142ffc3a]{padding-top:56.25%}@media (orientation:portrait){.map-container[data-v-142ffc3a]{padding-top:100vw}}.map-sidebar[data-v-142ffc3a]{z-index:999}.vue2leaflet-map[data-v-142ffc3a]{bottom:0;left:0;position:absolute;right:0;top:0}","",{version:3,sources:["webpack://./resources/scripts/components/business-map.vue"],names:[],mappings:"AACA,gCACE,kBAAF,CACE,8BAFF,gCAGI,iBAEF,CACF,CACA,8BACE,WAEF,CACA,kCAKE,QAAA,CAFA,MAAA,CAFA,iBAAA,CAGA,OAAA,CAFA,KAKF",sourcesContent:["\n.map-container {\n  padding-top: 56.25%;\n  @media (orientation: portrait) {\n    padding-top: 100vw;\n  }\n}\n\n.map-sidebar {\n  z-index: 999;\n}\n\n.vue2leaflet-map {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n"],sourceRoot:""}]),e.A=i},324:function(t,e,n){"use strict";var o=n(627),a=n.n(o),r=n(798),i=n.n(r)()(a());i.push([t.id,".map-container[data-v-bc9ca632]{padding-top:56.25%}@media (orientation:portrait){.map-container[data-v-bc9ca632]{padding-top:100vw}}.map-sidebar[data-v-bc9ca632]{z-index:999}.vue2leaflet-map[data-v-bc9ca632]{bottom:0;left:0;position:absolute;right:0;top:0}","",{version:3,sources:["webpack://./resources/scripts/components/localleeds-map.vue"],names:[],mappings:"AACA,gCACE,kBAAF,CACE,8BAFF,gCAGI,iBAEF,CACF,CACA,8BACE,WAEF,CACA,kCAKE,QAAA,CAFA,MAAA,CAFA,iBAAA,CAGA,OAAA,CAFA,KAKF",sourcesContent:["\n.map-container {\n  padding-top: 56.25%;\n  @media (orientation: portrait) {\n    padding-top: 100vw;\n  }\n}\n\n.map-sidebar {\n  z-index: 999;\n}\n\n.vue2leaflet-map {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n"],sourceRoot:""}]),e.A=i},536:function(t,e,n){"use strict";var o=n(627),a=n.n(o),r=n(798),i=n.n(r)()(a());i.push([t.id,".map-container[data-v-5d1b4b1a]{padding-top:56.25%}@media (orientation:portrait){.map-container[data-v-5d1b4b1a]{padding-top:100vw}}.map-sidebar[data-v-5d1b4b1a]{z-index:999}.vue2leaflet-map[data-v-5d1b4b1a]{bottom:0;left:0;position:absolute;right:0;top:0}","",{version:3,sources:["webpack://./resources/scripts/components/map.vue"],names:[],mappings:"AACA,gCACE,kBAAF,CACE,8BAFF,gCAGI,iBAEF,CACF,CACA,8BACE,WAEF,CACA,kCAKE,QAAA,CAFA,MAAA,CAFA,iBAAA,CAGA,OAAA,CAFA,KAKF",sourcesContent:["\n.map-container {\n  padding-top: 56.25%;\n  @media (orientation: portrait) {\n    padding-top: 100vw;\n  }\n}\n\n.map-sidebar {\n  z-index: 999;\n}\n\n.vue2leaflet-map {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n"],sourceRoot:""}]),e.A=i},502:function(){},462:function(){}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[547,897,807],(function(){return e(871),e(502),e(462)}));t.O()}]);
//# sourceMappingURL=app.js.map